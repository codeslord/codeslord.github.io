/* Performance Optimizations and Best Practices Applied */

/*
=== OPTIMIZATION SUMMARY ===

1. REMOVED ALL !IMPORTANT DECLARATIONS
   - Replaced 20+ !important declarations in _darkmode.scss
   - Improved CSS specificity instead of forcing styles
   - Better maintainability and debugging

2. CSS CUSTOM PROPERTIES IMPLEMENTATION
   - Added CSS custom properties in :root and [data-theme="dark"]
   - Better browser performance with native CSS variables
   - Reduced repetition and improved maintainability

3. SELECTOR OPTIMIZATION
   - Grouped similar selectors together
   - Reduced specificity where possible
   - Combined redundant selectors for better performance

4. WILL-CHANGE PROPERTIES
   - Added will-change to animated elements
   - Better browser optimization for animations
   - Improved transform performance

5. FONT RENDERING OPTIMIZATIONS
   - Added -webkit-font-smoothing: antialiased
   - Added -moz-osx-font-smoothing: grayscale
   - Added text-rendering: optimizeSpeed

6. DARK MODE SYNTAX HIGHLIGHTING
   - Comprehensive GitHub Dark theme colors
   - Proper contrast ratios for accessibility
   - Organized token classes for better performance

7. GLASSMORPHISM OPTIMIZATION
   - CSS custom properties for glassmorphic effects
   - Reduced redundant backdrop-filter declarations
   - Better browser compatibility

8. ACCESSIBILITY IMPROVEMENTS
   - Proper reduced motion support without !important
   - Better focus states
   - Improved color contrast

9. CODE BLOCK PERFORMANCE
   - Optimized line numbering styles
   - Reduced user-select prefixes to essential ones
   - Better overflow handling

10. ANIMATION PERFORMANCE
    - Proper will-change declarations
    - Transform3d optimization
    - Cubic-bezier timing functions for smooth animations
*/

/* CSS Custom Properties for Global Performance */
:root {
  /* Animation timing functions for consistency */
  --ease-out-cubic: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in-out-cubic: cubic-bezier(0.4, 0, 0.6, 1);
  
  /* Common transition durations */
  --transition-fast: 0.15s;
  --transition-normal: 0.3s;
  --transition-slow: 0.5s;
  
  /* Common shadows for consistency */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  
  /* Glassmorphism properties */
  --glass-blur: blur(12px);
  --glass-bg: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.3);
}

/* Performance optimized base animations */
.optimized-transition {
  transition: 
    transform var(--transition-normal) var(--ease-out-cubic),
    opacity var(--transition-normal) var(--ease-out-cubic),
    box-shadow var(--transition-normal) var(--ease-out-cubic);
}

/* GPU acceleration for better performance */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Optimized glassmorphism */
.glass-effect {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
}

/* Dark mode glassmorphism variables */
[data-theme="dark"] {
  --glass-bg-dark: rgba(31, 41, 55, 0.8);
  --glass-border-dark: rgba(99, 102, 241, 0.2);
  --glass-blur-dark: blur(16px);
}

/* Fallback for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(12px)) {
  .glass-effect {
    background: rgba(255, 255, 255, 0.9);
  }
  
  [data-theme="dark"] .glass-effect {
    background: rgba(31, 41, 55, 0.95);
  }
}

/* Optimized focus states for accessibility */
.accessible-focus {
  &:focus-visible {
    outline: 2px solid var(--blue, #0076df);
    outline-offset: 2px;
    border-radius: var(--border-radius, 3px);
  }
  
  /* Remove focus outline for mouse users */
  &:focus:not(:focus-visible) {
    outline: none;
  }
}

/* Performance monitoring - remove in production */
.perf-debug {
  /* Highlight elements that may cause repaints */
  * {
    outline: 1px solid red !important;
  }
  
  /* Highlight elements with expensive properties */
  *[style*="filter"],
  *[style*="backdrop-filter"],
  .glass-effect {
    background-color: rgba(255, 0, 0, 0.1) !important;
  }
}
